(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"sg+I":function(e,t,n){},tjUo:function(e,t,n){"use strict";n.r(t);n("sg+I"),n("ma9I"),n("QWBl"),n("pjDv"),n("yXV3"),n("4mDm"),n("2B1R"),n("E9XD"),n("ToJy"),n("sMBO"),n("Tskq"),n("zKZe"),n("07d7"),n("5s+n"),n("rB9j"),n("PKPk"),n("UxlC"),n("SYor"),n("wgYD"),n("R3/m"),n("l/vG"),n("0q/z"),n("n5pg"),n("Q7Pz"),n("Vnov"),n("nIe3"),n("CUyW"),n("qc1c"),n("VOz1"),n("Thag"),n("9D6x"),n("FZtP"),n("3bBZ");var a=n("o0o1"),r=n.n(a),o=(n("ls82"),n("yXPU")),i=n.n(o),s=n("RIqP"),c=n.n(s),l=n("lwsE"),u=n.n(l),d=n("W8MJ"),p=n.n(d),m=n("lSNA"),h=n.n(m),f=n("nbsC"),y=n.n(f),g=n("XzT5"),_=Object.assign({},n("4R65"),n("JXP8")),w=new _.Icon({iconUrl:"./assets/mapIcons/rent-strike.svg",iconSize:[40,40],iconAnchor:[20,20],className:"icon-rent-strike"}),v=_,E=n("xo8x").a.apply(void 0,["fetch-map-data-resolve","fetch-map-data-reject","viewport-size","render-infowindow","close-infowindow","title-details-toggle","title-details-close","title-details-open","show-modal","hide-modal","show-loading-indicator","hide-loading-indicator","choose-autocomplete-element","remove-autocompete-dropdown","search-fetch-data-reject","search-bar-no-data"]),b=(n("tkto"),n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("QILm")),k=n.n(b),L="public.emergency_tenant_protections_scored",C="Al2-1GXrd8GzwtSAID3J3LJn-flLLgNWzNtsT5nnSKW8dA2ClgaXXXMQR6WfE6wE",T="\nSELECT\n  municipality, state, country, range, has_expired_protections,\n  policy_type, policy_summary, link, the_geom,\n  end_date_earliest, end_date_legist, end_date_rent_relief, end_date_court\nFROM ".concat(L,"\nWHERE the_geom is not null and admin_scale = 'City'\nORDER BY range"),N="\nSELECT\n  c.the_geom, c.county, c.state, m.range,\n  m.policy_type, m.policy_summary, m.link,\n  m.range, has_expired_protections,\n  end_date_earliest, end_date_legist, end_date_rent_relief, end_date_court\nFROM ".concat("public.us_county_boundaries"," c\nJOIN ").concat(L," m\nON ST_Intersects(c.the_geom, m.the_geom)\nWHERE m.the_geom IS NOT NULL\n  AND m.admin_scale = 'County'\n  OR m.admin_scale = 'City and County'\nORDER BY m.range"),I="\nSELECT\n  s.the_geom, s.name, s.admin, s.sr_adm0_a3,\n  m.range, m.iso, m .policy_type, m.policy_summary,\n  m.link, has_expired_protections,\n  end_date_earliest, end_date_legist, end_date_rent_relief, end_date_court\nFROM ".concat("public.states_and_provinces_global"," s\nINNER JOIN ").concat(L," m\n  ON s.name = m.state\n  AND s.sr_adm0_a3 = m.iso\n  AND m.admin_scale = 'State'\nORDER BY m.range"),O="\nSELECT\n  c.the_geom, c.adm0_a3, c.name_en, m.range,\n  m.policy_type, m.policy_summary, m.link, has_expired_protections,\n  end_date_earliest\nFROM ".concat("public.countries"," c\nINNER JOIN ").concat(L," m\n  ON c.adm0_a3 = m.iso\n  AND m.admin_scale = 'Country'\nORDER BY m.range"),D="\n  SELECT\n    CASE\n      WHEN strike_status IN ('Yes / Sí / 是 / Oui', 'Yes') THEN 'Yes'\n      WHEN strike_status IN ('Unsure / No estoy segurx / 不确定 / Pas sûr.e.s.', 'No') THEN 'No'\n      ELSE 'Unsure'\n    END AS status,\n    CASE\n      WHEN type LIKE 'Rent Strike%' THEN 'Rent Strike / Rent decrease'\n      WHEN type LIKE 'Occupation / Squat%' THEN 'Occupation / Squat'\n      WHEN type LIKE 'Mutual aid / Direct aid%' THEN 'Mutual aid / Direct aid'\n      WHEN type LIKE 'Campaigning / List of demands%' THEN 'Campaigning / List of demands'\n      ELSE 'Other'\n    END AS strike_type,\n    TO_CHAR(date :: DATE, 'Month d, yyyy') as start,\n    the_geom, location, why, resources\n  FROM ".concat("public.emergency_housing_actions","\n  WHERE the_geom IS NOT NULL;\n"),S=function(e,t){switch(e){case"locality":return"SELECT municipality AS jurisdictionname, municipality, has_expired_protections, range, policy_type, policy_summary, link, end_date_earliest, end_date_legist, end_date_rent_relief, end_date_court, the_geom_webmercator AS the_geom FROM ".concat(L," WHERE admin_scale = 'City' AND municipality LIKE '").concat(t,"%'");case"adminDistrict2":return"SELECT  c.county AS jurisdictionname, m.range, m.policy_type, m.policy_summary, m.link, m.range, m.has_expired_protections, m.end_date_earliest, m.end_date_legist, m.end_date_rent_relief, m.end_date_court, c.the_geom_webmercator AS the_geom FROM ".concat("public.us_county_boundaries"," c INNER JOIN ").concat(L," m ON ST_Intersects(c.the_geom, m.the_geom) WHERE m.admin_scale = 'County' AND c.county LIKE '").concat(t,"%' AND m.admin_scale = 'County'");case"adminDistrict":return"SELECT state AS jurisdictionname, range, policy_type, policy_summary, link, has_expired_protections, end_date_earliest, end_date_legist, end_date_rent_relief, end_date_court, the_geom_webmercator AS the_geom  FROM ".concat(L," WHERE admin_scale ='State' AND state LIKE '").concat(t,"%'");case"countryRegion":return"SELECT country AS jurisdictionname, range, policy_type, policy_summary, link, has_expired_protections, end_date_earliest, the_geom_webmercator AS the_geom FROM ".concat(L," WHERE admin_scale = 'Country' AND policy_type = 'National' AND country LIKE '").concat(t,"%'")}},x=function(e,t,n){return e?new Date(e).toLocaleString(t||"en-US",{timeZone:n||"UTC",year:"numeric",month:"long",day:"numeric"}):null};function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e){var t=e.target;if("mouseover"===e.type)t.setStyle({fillOpacity:.4});else{if("mouseout"!==e.type)return;t.setStyle({fillOpacity:q})}}var B={cities:{name:"City Protections",nameI18n:"layer-select.cities",type:"point",query:T,zIndex:1,overlayOrder:0,props:function(e){var t=e.feature.properties,n=t.municipality,a=t.state,r=t.country,o=t.end_date_legist,i=t.end_date_rent_relief,s=t.end_date_court,c=t.end_date_earliest,l=k()(t,["municipality","state","country","end_date_legist","end_date_rent_relief","end_date_court","end_date_earliest"]);return j({jurisdictionName:"".concat(n).concat(a?", ".concat(a):"").concat(r?", ".concat(r):""),jurisdictionType:"City",jurisdictionTypeI18n:"city",popupName:n,endDateLegist:x(o),endDateRentRelief:x(i),endDateCourt:x(s),endDateEarliest:x(c)},l)},style:function(e){return{color:z[e.properties.range]||M,fillColor:P[e.properties.range]||M,fillOpacity:.85,radius:F,weight:W}},pointToLayer:function(e,t){return v.circleMarker(t,B.cities.style(e))},onEachFeature:function(e,t){e.properties.has_expired_protections&&(t.options.className=J[e.properties.range]+"--city-level"),t.on({mouseover:function(e){return A(e)},mouseout:function(e){return A(e)}})}},counties:{name:"County Protections",nameI18n:"layer-select.counties",type:"polygon",query:N,zIndex:2,overlayOrder:1,props:function(e){var t=e.feature.properties,n=t.state,a=t.county,r=t.end_date_legist,o=t.end_date_rent_relief,i=t.end_date_court,s=t.end_date_earliest,c=k()(t,["state","county","end_date_legist","end_date_rent_relief","end_date_court","end_date_earliest"]);return j({jurisdictionName:"".concat(a).concat(n?", ".concat(n):""),jurisdictionType:"County",jurisdictionTypeI18n:"county",popupName:"".concat(a).concat(n?", ".concat(n):""),endDateLegist:x(r),endDateRentRelief:x(o),endDateCourt:x(i),endDateEarliest:x(s)},c)},style:function(e){return{color:z[e.properties.range]||M,fillColor:P[e.properties.range]||M,fillOpacity:q,weight:W}},onEachFeature:function(e,t){e.properties.has_expired_protections&&(t.options.className=J[e.properties.range]),t.on({mouseover:function(e){return A(e)},mouseout:function(e){return A(e)}})}},states:{name:"State/Province Protections",nameI18n:"layer-select.states",type:"polygon",query:I,zIndex:3,overlayOrder:2,props:function(e){var t=e.feature.properties,n=t.name,a=t.admin,r=t.end_date_legist,o=t.end_date_rent_relief,i=t.end_date_court,s=t.end_date_earliest,c=k()(t,["name","admin","end_date_legist","end_date_rent_relief","end_date_court","end_date_earliest"]);return j({jurisdictionName:"".concat(n).concat(a?", ".concat(a):""),jurisdictionType:"State/Province",jurisdictionTypeI18n:"state-province",popupName:n,endDateLegist:x(r),endDateRentRelief:x(o),endDateCourt:x(i),endDateEarliest:x(s)},c)},style:function(e){return{fillColor:P[e.properties.range]||M,color:z[e.properties.range]||M,fillOpacity:q,weight:H}},onEachFeature:function(e,t){e.properties.has_expired_protections&&(t.options.className=J[e.properties.range]),t.on({mouseover:function(e){return A(e)},mouseout:function(e){return A(e)}})}},nations:{name:"National Protections",nameI18n:"layer-select.nations",type:"polygon",query:O,zIndex:4,overlayOrder:3,props:function(e){var t=e.feature.properties,n=t.name_en,a=t.end_date_earliest,r=k()(t,["name_en","end_date_earliest"]);return j({endDateEarliest:x(a),jurisdictionName:n,jurisdictionType:"Country",jurisdictionTypeI18n:"nation",popupName:n},r)},style:function(e){return{color:z[e.properties.range]||M,fillColor:P[e.properties.range]||M,fillOpacity:q,weight:W}},onEachFeature:function(e,t){e.properties.has_expired_protections&&(t.options.className=J[e.properties.range]),t.on({mouseover:function(e){return A(e)},mouseout:function(e){return A(e)}})}},rentStrikes:{name:"Housing Justice Actions",nameI18n:"layer-select.housingJusticeAction",type:"marker-cluster",query:D,zIndex:0,overlayOrder:4,props:function(e){return e.feature.properties},pointToLayer:function(e,t){return v.marker(t,{icon:w})}}};window.mapLayersConfig=B;var M="#939393",P=[void 0,"#5e5e5e","#bdbdbd","#ffffff"],z=[void 0,"#ffffff","#ffffff","#ffffff"],H=3,W=1.5,F=10,q=.95,J=[void 0,"few-protections","some-protections","many-protections"],U={lat:40.27,lng:-43.74,z:2,nations:!0,states:!0,cities:!0,counties:!0,rentStrikes:!0},K=Object.keys(B).length,V=function(){return document.querySelector("body").offsetWidth<640},Z={al:"Alabama",ak:"Alaska",az:"Arizona",ar:"Arkansas",ca:"California",co:"Colorado",ct:"Connecticut",de:"Delaware",fl:"Florida",ga:"Georgia",hi:"Hawaii",id:"Idaho",il:"Illinois",in:"Indiana",ia:"Iowa",ks:"Kansas",ky:"Kentucky",la:"Louisiana",me:"Maine",md:"Maryland",ma:"Massachusetts",mi:"Michigan",mn:"Minnesota",ms:"Mississippi",mo:"Missouri",mt:"Montana",ne:"Nebraska",nv:"Nevada",nh:"New Hampshire",nj:"New Jersey",nm:"New Mexico",ny:"New York",nc:"North Carolina",nd:"North Dakota",oh:"Ohio",ok:"Oklahoma",or:"Oregon",pa:"Pennsylvania",ri:"Rhode Island",sc:"South Carolina",sd:"South Dakota",tn:"Tennessee",tx:"Texas",ut:"Utah",vt:"Vermont",va:"Virginia",wa:"Washington",wv:"West Virginia",wi:"Wisconson",wy:"Wyoming",dc:"District of Columbia"},G={an:"Andaman and Nicobar Islands",ap:"Andhra Pradesh",ar:"Arunachal Pradesh",as:"Assam",br:"Bihar",ch:"Chandigarh",ct:"Chhattisgarh",dn:"Dadra and Nagar Haveli",dd:"Daman and Diu",dl:"Delhi",ga:"Goa",gj:"Gujarat",hr:"Haryana",hp:"Himachal Pradesh",jk:"Jammu and Kashmir",jh:"Jharkhand",ka:"Karnataka",kl:"Kerala",ld:"Lakshadweep",mp:"Madhya Pradesh",mh:"Maharashtra",mn:"Manipur",ml:"Meghalaya",mz:"Mizoram",nl:"Nagaland",or:"Odisha",py:"Puducherry",pb:"Punjab",rj:"Rajasthan",sk:"Sikkim",tn:"Tamil Nadu",tg:"Telangana",tr:"Tripura",up:"Uttar Pradesh",ut:"Uttarakhand",wb:"West Bengal"},X=(n("T63A"),n("J4zp")),Y=n.n(X),Q=(n("bZMm"),"https://".concat("ampitup",".carto.com/api/v2/sql"));function $(e,t){E.call(e,null,t)}function ee(e,t){E.call(e,null,t)}function te(e){return ne.apply(this,arguments)}function ne(){return(ne=i()(r.a.mark((function e(t){var n,a,o=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"geojson",e.next=3,fetch("".concat(Q,"?q=").concat(window.encodeURIComponent(t),"&format=").concat(n));case 3:if((a=e.sent)&&a.ok){e.next=6;break}throw Error("Unable to fetch Carto data");case 6:return e.abrupt("return",a.json());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(){return(ae=i()(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object.entries(B).forEach(function(){var e=i()(r.a.mark((function e(t){var n,a,o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Y()(t,2),a=n[0],o=n[1],e.prev=1,e.next=4,te(o.query);case 4:i=e.sent,$("fetch-map-data-resolve",{key:a,layerConfig:o,data:i}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),ee("fetch-map-data-reject",e.t0),E.call("hide-loading-indicator");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e){return oe.apply(this,arguments)}function oe(){return(oe=i()(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=navigator.language?"&culture = ".concat(navigator.language):"",e.prev=1,e.next=4,fetch("https://dev.virtualearth.net/REST/v1/Autosuggest?query=".concat(t).concat(n,"&includeEntityTypes=place&userMapView=-90,-180,90,180&key=").concat(C));case 4:return a=e.sent,e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(1),E.call("search-fetch-data-reject",this,e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,10]])})))).apply(this,arguments)}function ie(e){return se.apply(this,arguments)}function se(){return(se=i()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://dev.virtualearth.net/REST/v1/Locations/".concat(t,"?&key=").concat(C));case 3:return n=e.sent,e.abrupt("return",n.json());case 7:e.prev=7,e.t0=e.catch(0),E.call("search-fetch-data-reject",this,e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})))).apply(this,arguments)}var ce=function(){function e(t){var n=this;u()(this,e),h()(this,"dataLayers",new Map),h()(this,"popupTemplate",document.querySelector(".popup-template").innerHTML),h()(this,"rentStrikePopupTemplate",document.querySelector(".rentstrike-popup-template").innerHTML),h()(this,"handleWindowResize",(function(){V()&&n.map.invalidateSize()})),h()(this,"handleInfoWindowClose",(function(){n.map.closePopup(),V()&&n.map.invalidateSize()})),h()(this,"handleAddLayerError",(function(e){console.error(e),n.toggleLoadingIndicator(!1)})),h()(this,"handleAddLayer",(function(e){var t,a,r,o=e.key,i=e.layerConfig,s=e.data,c=n;switch(i.type){case"point":t=v.geoJson(s,{pointToLayer:i.pointToLayer,onEachFeature:i.onEachFeature});break;case"polygon":t=v.geoJson(s,{style:function(e){return i.style(e)},onEachFeature:i.onEachFeature});break;case"marker-cluster":a=v.geoJson(s,{pointToLayer:i.pointToLayer}),(r=v.markerClusterGroup({maxClusterRadius:40,polygonOptions:{color:"#c92a1d",zoomToBoundsOnClick:!1}}).on("clusterclick",(function(){V()&&E.call("title-details-close")}))).addLayer(a).bindPopup((function(e){return E.call("render-infowindow",null,{template:"rentstrikes",data:e.feature.properties}),y.a.render(c.rentStrikePopupTemplate,i.props(e))})),t=r;break;default:throw Error("Unrecognized map layer type")}"marker-cluster"!==i.type&&t.bindPopup((function(e){var t=i.props(e);return E.call("render-infowindow",null,{template:"protections",data:t}),y.a.render(c.popupTemplate,t)}));var l=g.a.t(i.nameI18n)||i.name;n.dataLayers.set(l,{layerGroup:t,zIndex:i.zIndex,overlayOrder:i.overlayOrder}),n.config[o]&&t.addTo(n.map),n.fixZOrder(),n.handleAllLayersAdded()})),h()(this,"handleAllLayersAdded",(function(){n.dataLayers.size===K&&(n.fixOverlayOrder(n.dataLayers).forEach((function(e,t){var a=e.layerGroup;n.layersControl.addOverlay(a,t)})),n.toggleLoadingIndicator(!1))})),h()(this,"fixZOrder",(function(){Array.from(n.dataLayers.values()).sort((function(e,t){return t.zIndex-e.zIndex})).forEach((function(e){var t=e.layerGroup;n.map.hasLayer(t)&&t.bringToFront()}))})),h()(this,"fixOverlayOrder",(function(e){return new Map(c()(e.entries()).sort((function(e,t){return e[1].overlayOrder-t[1].overlayOrder})))})),h()(this,"toggleLoadingIndicator",(function(e){e?E.call("show-loading-indicator"):E.call("hide-loading-indicator")})),h()(this,"findAutocompleteLocation",function(){var e=i()(r.a.mark((function e(t){var a,o,i,s,c,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ie(t.trim());case 3:a=e.sent,o=a.resourceSets[0].resources[0],i=o.point.coordinates,s=v.icon({iconUrl:v.Icon.Default}),n.map.setView(i,5),(c=new v.marker(i,{icon:s})).addTo(n.map),l='\n          <div class="popup-container locality-popup-container">\n              <p class="popup-title"><strong>'.concat(o.name,"</strong></p>\n          </div>\n      "),c.bindPopup(l).openPopup(),n.showSearchResultProtections(o),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),E.call("search-bar-no-data",n,e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}()),h()(this,"showSearchResultProtections",function(){var e=i()(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getSearchResultProtections(t);case 2:a=e.sent,E.call("render-infowindow",null,{template:"searchResult",data:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h()(this,"getSearchResultProtections",function(){var e=i()(r.a.mark((function e(t){var a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"United States"===t.address.countryRegion&&2===(a=t.address.adminDistrict).length&&Z[a.toLowerCase()]&&Object.assign(t.address,{adminDistrict:Z[a.toLowerCase()]}),"India"===t.address.countryRegion&&2===(o=t.address.adminDistrict).length&&G[o.toLowerCase()]&&Object.assign(t.address,{adminDistrict:G[o.toLowerCase()]}),e.abrupt("return",["locality","adminDistrict2","adminDistrict","countryRegion"].reduce(function(){var e=i()(r.a.mark((function e(a,o){var i,s,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a;case 2:if(i=e.sent,t.address[o]){e.next=5;break}return e.abrupt("return",i);case 5:return e.next=7,n.queryForProtectionByLocation(o,t.address[o]);case 7:if(s=e.sent,c={locality:"cities",adminDistrict2:"counties",adminDistrict:"states",countryRegion:"nations"}[o],!s||!s.features.length){e.next=11;break}return e.abrupt("return",i.concat(B[c].props(Object.assign({},{feature:s.features[0]}))));case 11:return e.abrupt("return",i);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Promise.resolve([])));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h()(this,"queryForProtectionByLocation",function(){var e=i()(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"adminDistrict2"===t&&n.indexOf("County")>=0&&(n=n.replace(" County","")),e.prev=1,e.next=4,te(S(t,n));case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),console.log("no protections data from ".concat(t," named ").concat(n)),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),this.config=t||U,this.init(),this.bindListeners()}return p()(e,[{key:"init",value:function(){var e=this.config,t=e.lat,n=e.lng,a=e.z;this.map=v.map("map",{zoomControl:!1,attributionControl:!1,maxBounds:[[-85.05,-190],[85.05,200]],maxZoom:12}),this.map.setView([t,n],a),this.attributionControl=v.control.attribution({prefix:"Data sources by: "}).addAttribution("<a href='https://www.antievictionmap.com/' target='_blank'>Anti-Eviction Mapping Project</a>").addAttribution("<a href='https://www.openstreetmap.org' target='_blank'>Open Street Map Contributors</a>").addTo(this.map),this.zoomControl=v.control.zoom({position:"bottomright"}).addTo(this.map),this.layersControl=v.control.layers(null,null,{position:"topright",collapsed:!1}).addTo(this.map),this.basemapLayer=v.tileLayer("https://{s}.basemaps.cartocdn.com/dark_nolabels/{z}/{x}/{y}{r}.png",{minZoom:1,maxZoom:18}).addTo(this.map)}},{key:"bindListeners",value:function(){var e,t=this,n=this;this.map.on("popupopen",(function(e){document.getElementById("root").classList.add("aemp-popupopen"),V()&&(E.call("title-details-close"),n.map.invalidateSize()),n.map.setView(e.popup._latlng,n.map.getZoom(),{animate:!0})})),this.map.on("popupclose",(function(){document.getElementById("root").classList.remove("aemp-popupopen"),E.call("close-infowindow"),V()&&setTimeout((function(){n.map.invalidateSize()}),100)})),this.map.on("click",(function(){V()&&E.call("title-details-close")})),this.map.on("overlayadd",(function(){t.fixZOrder()})),window.addEventListener("resize",(function(){clearTimeout(e),e=setTimeout(n.handleWindowResize,250)})),window.addEventListener("load",(function(){V()&&E.call("title-details-close")})),E.on("close-infowindow.map",this.handleInfoWindowClose),E.on("fetch-map-data-resolve.map",this.handleAddLayer),E.on("fetch-map-data-reject.map",this.handleLayerError),E.on("choose-autocomplete-element.map",this.findAutocompleteLocation)}}]),e}(),le=(n("oVuX"),n("Fugr")),ue=function(e){(e||document).querySelectorAll("[".concat("data-i18n","]")).forEach((function(e){var t=e.dataset.i18n,n=g.a.t(t);e.innerHTML=n!==t?n:g.a.t(t,{lng:"en"})}))},de={whitelist:["en","es","pt-BR"],fallbackLng:"en",debug:!1,detection:{order:["querystring","navigator"],lookupQuerystring:"lang",checkForSimilarInWhitelist:!0}},pe=function(){var e=i()(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1).then(n.bind(null,"/gcp")).then((function(e){var t=e.default;de.resources=t,g.a.use(le.a).init(de).then((function(){ue()}))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(){function e(){var t=this;u()(this,e),h()(this,"infowindowContainer",document.getElementById("aemp-infowindow-container")),h()(this,"infowindowTemplate",document.getElementById("aemp-infowindow-template").innerHTML),h()(this,"rentStrikeInfowindowTemplate",document.getElementById("aemp-rentstrike-infowindow-template").innerHTML),h()(this,"searchResultInfowindowTemplate",document.getElementById("search-result-infowindow-template").innerHTML),h()(this,"closeInfoWindow",(function(){document.getElementById("root").classList.remove("aemp-popupopen"),t.infowindowContainer.innerHTML=null})),h()(this,"render",(function(e){var n=e.template,a=e.data;switch(n){case"protections":t.infowindowContainer.innerHTML=y.a.render(t.infowindowTemplate,a);break;case"rentstrikes":t.infowindowContainer.innerHTML=y.a.render(t.rentStrikeInfowindowTemplate,a);break;case"searchResult":t.infowindowContainer.innerHTML=a.length?'\n        <div class="aemp-infowindow">\n          <a class="aemp-infowindow-close" href="#close">×</a>\n          <div>\n            <p class="infowindow-title">\n              <strong data-i18n="infowindow.policy.title"></strong>\n            </p>\n          </div>\n\n          '+a.map((function(e){return y.a.render(t.searchResultInfowindowTemplate,e)})).join("")+"</div>":'\n        <div>\n          <p class="infowindow-title">\n            <strong data-i18n="infowindow.policy.title"></strong>\n          </p>\n        </div>\n        <div class="aemp-infowindow">\n          <a class="aemp-infowindow-close" href="#close">×</a>\n          <div><p><strong data-i18n="searchbar.not-found">No tenant protections listed for this location</strong></p></div>\n          </div>'}ue(t.infowindowContainer),t.infowindowContainer.querySelector(".aemp-infowindow-close").addEventListener("click",(function(){return E.call("close-infowindow")})),document.getElementById("root").classList.add("aemp-popupopen")})),this.bindListeners()}return p()(e,[{key:"bindListeners",value:function(){E.on("render-infowindow",this.render),E.on("close-infowindow.self",this.closeInfoWindow)}}]),e}(),he=function e(){var t=this;u()(this,e),h()(this,"titleDetails",document.getElementById("aemp-titlebox").querySelector("details")),h()(this,"bindListeners",(function(){t.titleDetails.addEventListener("toggle",(function(){this.open?document.getElementById("aemp-titlebox").classList.remove("collapsed","aemp-titlebox-closed"):document.getElementById("aemp-titlebox").classList.add("collapsed","aemp-titlebox-closed")})),E.on("title-details-toggle",t.toggleTitleDetails),E.on("title-details-open",t.openTitleDetails),E.on("title-details-close",t.closeTitleDetails)})),h()(this,"closeTitleDetails",(function(){t.titleDetails.open=!1})),h()(this,"openTitleDetails",(function(){t.titleDetails.open=!0})),h()(this,"toggleTitleDetails",(function(){t.titleDetails.open?t.titleDetails.open=!1:t.titleDetails.open=!0})),this.bindListeners()},fe=function(){function e(){var t=this;u()(this,e),h()(this,"loadingContainer",document.getElementById("loading-container")),h()(this,"show",(function(){t.loadingContainer.hidden=!1})),h()(this,"hide",(function(){t.loadingContainer.hidden=!0})),this.bindListeners()}return p()(e,[{key:"bindListeners",value:function(){E.on("show-loading-indicator",this.show),E.on("hide-loading-indicator",this.hide)}}]),e}(),ye=function(){function e(){var t=this;u()(this,e),h()(this,"modalContainer",document.getElementById("modal-container")),h()(this,"closeButton",document.querySelector(".modal-close")),h()(this,"show",(function(){t.modalContainer.hidden=!1})),h()(this,"hide",(function(){t.modalContainer.hidden=!0})),this.bindListeners()}return p()(e,[{key:"bindListeners",value:function(){E.on("show-modal",this.show),E.on("hide-modal",this.hide),this.closeButton.addEventListener("click",(function(){E.call("hide-modal")}))}}]),e}(),ge=function(){function e(){var t=this;u()(this,e),h()(this,"searchBar",document.getElementById("search-bar")),h()(this,"autoCompleteElement",document.getElementById("search-bar-autocomplete")),h()(this,"icon",this.searchBar.value),h()(this,"defaultValue",this.icon+g.a.t("searchbar.default-value")),h()(this,"removeAutocomplete",(function(){setTimeout((function(){t.autoCompleteElement.innerHTML="",t.searchBar.value=t.defaultValue,t.removeNoData()}),400)})),h()(this,"removeNoData",(function(){t.searchBar.classList.contains("search-bar-no-data")&&t.searchBar.classList.remove("search-bar-no-data")})),this.searchBar.value=this.defaultValue,this.searchBar.addEventListener("input",(function(){return t.autoComplete(t.searchBar.value)})),this.searchBar.addEventListener("blur",this.removeAutocomplete),this.searchBar.addEventListener("focus",(function(){t.searchBar.value=""})),this.searchBar.addEventListener("change",(function(e){if(c()(document.getElementsByClassName("autocompleteElement")).map((function(e){return e.value})).indexOf(t.searchBar.value)>=0){var n=t.searchBar.value;E.call("choose-autocomplete-element",null,n)}e.stopPropagation()})),E.on("search-fetch-data-reject",(function(e){return console.error(e)})),document.getElementById("search-bar-form").addEventListener("submit",(function(e){var n=c()(document.getElementsByClassName("autocompleteElement")).map((function(e){return e.value}));n.length>0?E.call("choose-autocomplete-element",null,n[0]):t.noDataFound(),e.stopPropagation(),e.preventDefault()}))}var t;return p()(e,[{key:"noDataFound",value:function(){document.getElementById("search-bar").classList.add("search-bar-no-data")}},{key:"autoComplete",value:(t=i()(r.a.mark((function e(t){var n,a,o=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.removeNoData(),!(t.length>1)){e.next=12;break}return e.prev=2,e.next=5,re(t.trim());case 5:(n=e.sent)&&n.resourceSets&&n.resourceSets[0].resources&&(a=n.resourceSets[0].resources[0].value.filter((function(e){return"Place"===e.__type})),this.autoCompleteElement.innerHTML=a.map((function(e){return o.autocompleteElement(e.address.formattedAddress)})).join("")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),E.call("search-fetch-data-reject",this,e.t0);case 12:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(e){return t.apply(this,arguments)})},{key:"autocompleteElement",value:function(e){return'\n        <option value="'.concat(e,'" class = "autocompleteElement">\n    ')}}]),e}();n("+2oP"),n("EnZy");var _e=function(e){for(var t=window.location.hash.slice(1).split("&"),n={},a=0;a<t.length;a++){var r=t[a].split("="),o=Y()(r,2),i=o[0],s=o[1];n[i]=s}isNaN(n.z)||(e.z=parseInt(n.z)),isNaN(n.lat)||(e.lat=parseFloat(n.lat)),isNaN(n.lng)||(e.lng=parseFloat(n.lng)),void 0!==n.cities&&("true"===n.cities?e.cities=!0:"false"===n.cities&&(e.cities=!1)),void 0!==n.counties&&("true"===n.counties?e.counties=!0:"false"===n.counties&&(e.counties=!1)),void 0!==n.states&&("true"===n.states?e.states=!0:"false"===n.states&&(e.states=!1)),void 0!==n.nations&&("true"===n.nations?e.nations=!0:"false"===n.nations&&(e.nations=!1)),void 0!==n.rentstrike&&("true"===n.rentstrike?e.rentStrikes=!0:"false"===n.rentstrike&&(e.rentStrikes=!1))}(U);pe().then((function(){new ye,new fe,new me,new he,new ge,new ce(_e),function(){ae.apply(this,arguments)}()}))}},[["tjUo",2,3]]]);
//# sourceMappingURL=index.8a9ab8fb95cac717fb73.js.map